<form class="{{cssClass}} {{actor.type}} flexcol" autocomplete="off">

    <!-- Sheet Header -->
    <header class="sheet-header">
      <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
      <div class="header-fields">
        <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="{{localize "BITE_BULLET.CharacterName"}}"/></h1>
      </div>
    </header>
  
    <!-- Sheet Tab Navigation -->
    <nav class="sheet-tabs tabs" data-group="primary">
      <a class="item" data-tab="features">{{localize "BITE_BULLET.TabAttributes"}}</a>
      <a class="item" data-tab="inventory">{{localize "BITE_BULLET.TabInventory"}}</a>
      <a class="item" data-tab="biography">{{localize "BITE_BULLET.TabBiography"}}</a>
    </nav>
  
    <!-- Sheet Body -->
    <section class="sheet-body">
  
      <!-- Attributes Tab -->
      <div class="tab features" data-group="primary" data-tab="features">
        
        <!-- Attributes -->
        <div class="attributes">
          {{#each system.attributes as |attribute key|}}
          <div class="attribute">
            <div class="attribute-label">{{#if attribute.label}}{{attribute.label}}{{else}}{{localize (lookup config.attributes key)}}{{/if}}</div>
            <input class="attribute-value" name="system.attributes.{{key}}.value" type="number" value="{{attribute.value}}" data-dtype="Number"/>
            <button class="save-roll rollable" data-attribute="{{key}}">{{localize "BITE_BULLET.Save"}}</button>
          </div>
          {{/each}}
        </div>
  
        <!-- Resources -->
        <div class="resources">
          <div class="resource">
            <div class="resource-label">{{localize "BITE_BULLET.ResourceSand"}}</div>
            <div class="resource-value">
              <input name="system.resources.sand.value" type="number" value="{{system.resources.sand.value}}" data-dtype="Number"/>
              <span>/</span>
              <input name="system.resources.sand.max" type="number" value="{{system.resources.sand.max}}" data-dtype="Number"/>
            </div>
          </div>
          
          <div class="resource">
            <div class="resource-label">{{localize "BITE_BULLET.ResourceInventory"}}</div>
            <div class="resource-value">
              <input name="system.resources.inventory.value" type="number" value="{{system.resources.inventory.value}}" data-dtype="Number"/>
            </div>
          </div>
          
          <div class="resource">
            <div class="resource-label">{{localize "BITE_BULLET.ResourceLoad"}}</div>
            <div class="resource-value">
              <span>{{system.resources.load.value}}</span>
            </div>
          </div>
          
          <div class="resource">
            <div class="resource-label">{{localize "BITE_BULLET.ResourceReserve"}}</div>
            <div class="resource-value">
              <span>{{system.resources.reserve.value}}</span>
            </div>
          </div>
        </div>
  
        <!-- Gear Resources -->
        <div class="resources">
          <div class="resource">
            <div class="resource-label">{{localize "BITE_BULLET.ResourceLead"}}</div>
            <div class="resource-value">
              <input name="system.gear.lead.value" type="number" value="{{system.gear.lead.value}}" data-dtype="Number"/>
              <span>/</span>
              <input name="system.gear.lead.max" type="number" value="{{system.gear.lead.max}}" data-dtype="Number"/>
            </div>
          </div>
          
          <div class="resource">
            <div class="resource-label">{{localize "BITE_BULLET.ResourceMoney"}}</div>
            <div class="resource-value">
              <input name="system.gear.money.value" type="number" value="{{system.gear.money.value}}" data-dtype="Number"/>
            </div>
          </div>
        </div>
  
        <!-- Characteristics -->
        <div class="characteristics">
          <h3>{{localize "BITE_BULLET.Characteristics"}}</h3>
          {{#each system.characteristics as |characteristic key|}}
          <div class="characteristic">
            {{!-- Build a tooltip: Title (label) + Subtitle (description) --}}
            <div class="characteristic-name" title="Title: {{#if characteristic.label}}{{characteristic.label}}{{else}}{{localize (lookup config.characteristics key)}}{{/if}}{{#if characteristic.description}}&#10;Subtitle: {{characteristic.description}}{{/if}}" aria-label="{{#if characteristic.label}}{{characteristic.label}}{{else}}{{localize (lookup config.characteristics key)}}{{/if}}">{{#if characteristic.label}}{{characteristic.label}}{{else}}{{localize (lookup config.characteristics key)}}{{/if}}</div>
            <input class="characteristic-rank" name="system.characteristics.{{key}}.rank" type="number" value="{{characteristic.rank}}" data-dtype="Number" min="1" max="5"/>
            <input class="characteristic-description" name="system.characteristics.{{key}}.description" type="text" value="{{characteristic.description}}" placeholder="{{localize "BITE_BULLET.Description"}}"/>
            <div class="characteristic-uses">{{characteristic.uses}}/{{characteristic.requiredUses}}</div>
            <div class="characteristic-controls">
              <button class="characteristic-tap{{#if characteristic.isDisabled}} disabled{{/if}}" data-characteristic="{{key}}" {{#if characteristic.isDisabled}}disabled{{/if}}>{{localize "BITE_BULLET.Tap"}}</button>
              {{#if characteristic.canAdvance}}
              <button class="characteristic-advance" data-characteristic="{{key}}" title="Attempt rank advancement">+</button>
              {{/if}}
            </div>
          </div>
          {{/each}}
        </div>
  
        <!-- Action Buttons -->
        <div style="margin-top: 20px; display: flex; gap: 8px; flex-wrap: wrap;">
          <button class="faith-act" type="button">{{localize "BITE_BULLET.ActOfFaith"}}</button>
          <button class="physical-attack" type="button">{{localize "ATTACK.PhysicalAttackTitle"}}</button>
          <button class="social-attack" type="button">{{localize "ATTACK.SocialAttackTitle"}}</button>
        </div>
  
      </div>
  
      <!-- Inventory Tab -->
      <div class="tab inventory" data-group="primary" data-tab="inventory">
        
        <div class="inventory-grid">
          
          <!-- Weapons Section -->
          <div class="inventory-section">
            <h3>
              {{localize "BITE_BULLET.ItemTypeWeapon"}}
              <a class="item-create" data-type="weapon"><i class="fas fa-plus"></i></a>
            </h3>
            <ol class="items-list">
              {{#each weapons as |item id|}}
              <li class="item weapon" data-item-id="{{item._id}}">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                <h4 class="item-name">{{item.name}}</h4>
                <div class="weapon-details">
                  <div class="weapon-detail">
                    <span class="weapon-detail-label">{{localize "BITE_BULLET.Damage"}}</span>
                    {{item.system.damage}}
                  </div>
                  <div class="weapon-detail">
                    <span class="weapon-detail-label">{{localize "BITE_BULLET.Range"}}</span>
                    {{item.system.range}}
                  </div>
                  {{#if item.system.shots}}
                  <div class="weapon-detail">
                    <span class="weapon-detail-label">Shots</span>
                    {{item.system.currentShots}}/{{item.system.shots}}
                  </div>
                  {{/if}}
                </div>
                {{#if (and item.system.shots (gt item.system.shots 0))}}
                <div class="weapon-actions">
                  <button class="weapon-reload" data-item-id="{{item._id}}" {{#unless (gt @root.lead.value 0)}}disabled{{/unless}}>
                    <i class="fas fa-redo"></i> Reload ({{@root.lead.value}} Lead)
                  </button>
                </div>
                {{/if}}
                <div class="item-controls">
                  <a class="item-control item-edit" title="{{localize "BITE_BULLET.EditItem"}}"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="{{localize "BITE_BULLET.DeleteItem"}}"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
  
          <!-- Armor Section -->
          <div class="inventory-section">
            <h3>
              {{localize "BITE_BULLET.ItemTypeArmor"}}
              <a class="item-create" data-type="armor"><i class="fas fa-plus"></i></a>
            </h3>
            <ol class="items-list">
              {{#each armor as |item id|}}
              <li class="item" data-item-id="{{item._id}}">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                <h4 class="item-name">{{item.name}}</h4>
                <div class="armor-details">
                  <div class="armor-value">Armor: {{item.system.armor.value}}</div>
                  <div class="armor-slots">Slots: {{item.system.slots}}</div>
                </div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
  
          <!-- Gear Section -->
          <div class="inventory-section">
            <h3>
              {{localize "BITE_BULLET.ItemTypeGear"}}
              <a class="item-create" data-type="gear"><i class="fas fa-plus"></i></a>
            </h3>
            <ol class="items-list">
              {{#each gear as |item id|}}
              <li class="item" data-item-id="{{item._id}}">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                <h4 class="item-name">{{item.name}}</h4>
                <div class="gear-details">
                  <div class="gear-slots">Slots: {{item.system.slots}}</div>
                  {{#if item.system.uses}}
                  <div class="gear-uses">Uses: {{item.system.uses.value}}/{{item.system.uses.max}}</div>
                  {{/if}}
                </div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
  
          <!-- Burdens Section -->
          <div class="inventory-section">
            <h3>
              {{localize "BITE_BULLET.ItemTypeBurden"}}
              <a class="item-create" data-type="burden"><i class="fas fa-plus"></i></a>
            </h3>
            <ol class="items-list burden-list">
              {{#each burdens as |item id|}}
              <li class="item burden" data-item-id="{{item._id}}">
                <h4 class="item-name burden-name">{{item.name}}</h4>
                <div class="burden-effect">{{item.system.effect}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
  
        </div>
  
      </div>
  
      <!-- Biography Tab -->
      <div class="tab biography" data-group="primary" data-tab="biography">
        {{editor system.details.biography.value target="system.details.biography.value" rollData=rollData button=true owner=owner editable=editable engine="prosemirror"}}
      </div>
  
    </section>
  </form>